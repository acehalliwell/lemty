<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lemonade Sales Predictor</title>
    
    <!-- 1. Bootstrap CSS CDN (v5.3) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <!-- Custom style to make the application centered and visually appealing -->
    <style>
        /* Using a clean, neutral font */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f8f9fa; /* Light gray background */
        }
        .main-container {
            max-width: 900px;
            margin-top: 50px;
            margin-bottom: 50px;
            padding: 20px;
        }
        /* Custom card style for emphasis */
        .card-prediction {
            background: linear-gradient(135deg, #ffffff 0%, #f0f8ff 100%);
            border: none;
            border-radius: 1rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>

    <div class="container main-container">
        <!-- Application Title -->
        <header class="text-center mb-5">
            <h1 class="display-5 text-primary fw-bold">üçã Sales Predictor & Simulator</h1>
            <p class="lead text-muted">Set controllable decisions and external conditions to predict sales.</p>
        </header>

        <div class="row g-4">
            
            <!-- SECTION 1: Controllable Business Decisions -->
            <div class="col-md-6">
                <div class="card card-prediction h-100">
                    <div class="card-header bg-primary text-white fw-bold rounded-top-2">
                        <i class="bi bi-gear-fill me-2"></i> Your Decisions (Controllable)
                    </div>
                    <div class="card-body">
                        
                        <!-- Price Setting -->
                        <div class="mb-3">
                            <label for="priceRange" class="form-label">Price per Cup: <span id="priceValue" class="fw-bold text-success">$2.00</span></label>
                            <input type="range" class="form-range" id="priceRange" min="1.00" max="5.00" step="0.25" value="2.00" oninput="updateRangeValue('priceRange', 'priceValue', '$')">
                        </div>
                        
                        <!-- Recipe Ratio -->
                        <div class="mb-3">
                            <label for="sugarRatio" class="form-label">Sugar Ratio: <span id="sugarValue" class="fw-bold">50%</span></label>
                            <input type="range" class="form-range" id="sugarRatio" min="10" max="90" step="5" value="50" oninput="updateRangeValue('sugarRatio', 'sugarValue', '%')">
                            <small class="text-muted">Adjusts perceived sweetness vs. tartness.</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECTION 2: External Scenario / Environmental Factors -->
            <div class="col-md-6">
                <div class="card card-prediction h-100">
                    <div class="card-header bg-secondary text-white fw-bold rounded-top-2">
                        <i class="bi bi-cloud-sun-fill me-2"></i> External Scenario (Uncontrollable)
                    </div>
                    <div class="card-body">
                        
                        <!-- Weather/Temperature -->
                        <div class="mb-3">
                            <label for="weatherTemp" class="form-label">Predicted Temperature (F¬∞): <span id="tempValue" class="fw-bold text-danger">80</span>¬∞F</label>
                            <input type="range" class="form-range" id="weatherTemp" min="50" max="100" step="5" value="80" oninput="updateRangeValue('weatherTemp', 'tempValue', '¬∞F')">
                        </div>
                        
                        <!-- Day of Week -->
                        <div class="mb-3">
                            <label for="dayOfWeek" class="form-label">Day of Week:</label>
                            <select class="form-select" id="dayOfWeek">
                                <option value="weekday">Weekday (Mon-Fri)</option>
                                <option value="weekend" selected>Weekend (Sat-Sun)</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- PREDICTION OUTPUT AREA -->
            <div class="col-12 mt-4">
                <button type="button" class="btn btn-lg btn-success w-100" id="predictButton">
                    <i class="bi bi-graph-up me-2"></i> Run Sales Prediction
                </button>
                
                <div class="card mt-4 card-prediction">
                    <div class="card-body text-center">
                        <h5 class="card-title text-muted">Predicted Sales</h5>
                        <h2 id="predictionOutput" class="display-3 fw-bolder text-info">-</h2>
                        <p class="card-text text-muted" id="predictionDetails">Units predicted per day (based on a 100-run simulation).</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 2. Bootstrap JS and Popper CDN (Required for Bootstrap's interactive components like dropdowns) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- 3. VANILLA JAVASCRIPT LOGIC -->
    <script>
        // --- UTILITY FUNCTION FOR SLIDERS ---
        function updateRangeValue(inputId, outputId, suffix = '') {
            const input = document.getElementById(inputId);
            const output = document.getElementById(outputId);
            let value = input.value;
            
            // Format price with two decimal places
            if (suffix === '$') {
                value = parseFloat(value).toFixed(2);
            }
            output.textContent = `${suffix === '$' ? '$' : ''}${value}${suffix !== '$' ? suffix : ''}`;
        }

        // --- CORE SIMULATION / PREDICTION LOGIC ---
        document.getElementById('predictButton').addEventListener('click', () => {
            // 1. Gather all input values
            const price = parseFloat(document.getElementById('priceRange').value);
            const sugarRatio = parseInt(document.getElementById('sugarRatio').value);
            const temp = parseInt(document.getElementById('weatherTemp').value);
            const dayType = document.getElementById('dayOfWeek').value;

            // 2. Simple Predictive Formula (Placeholder for your future Sim.js model)
            // This is a dummy formula to show how the UI inputs affect the output.
            // Formula Logic: Base Sales (200) + Temp bonus + Weekend bonus - Price penalty + Recipe adjustment
            
            // Base Demand
            let predictedSales = 200; 

            // Temp Bonus: High temp increases sales
            if (temp > 75) {
                predictedSales += (temp - 75) * 5; 
            } else if (temp < 65) {
                predictedSales -= (65 - temp) * 3; 
            }

            // Day Type Multiplier
            if (dayType === 'weekend') {
                predictedSales *= 1.5; // 50% more traffic on weekends
            }

            // Price Penalty: Higher price reduces sales (elasticity)
            predictedSales -= (price * 30); 

            // Recipe Adjustment: Optimal recipe (50% sugar) gets a bonus
            const recipeDeviation = Math.abs(sugarRatio - 50);
            predictedSales -= recipeDeviation * 2;

            // Ensure sales are not negative
            predictedSales = Math.max(0, Math.round(predictedSales));
            
            // 3. Display the result
            const outputElement = document.getElementById('predictionOutput');
            const detailsElement = document.getElementById('predictionDetails');
            
            // Add a temporary loading state for realism
            outputElement.textContent = 'Running...';
            outputElement.classList.remove('text-info');
            outputElement.classList.add('text-warning');

            // Simulate API latency or calculation time
            setTimeout(() => {
                outputElement.textContent = predictedSales;
                outputElement.classList.remove('text-warning');
                outputElement.classList.add('text-info');
                
                if (predictedSales >= 250) {
                    detailsElement.textContent = `Excellent market conditions and effective pricing! Estimated revenue: $${(predictedSales * price).toFixed(2)}`;
                } else if (predictedSales === 0) {
                    detailsElement.textContent = 'Warning: Prediction suggests zero sales. Check price or expected weather.';
                } else {
                    detailsElement.textContent = `Expected sales are ${predictedSales} units. Estimated revenue: $${(predictedSales * price).toFixed(2)}`;
                }
                
            }, 500); // Wait 500ms
        });

        // Initialize display values on load
        document.addEventListener('DOMContentLoaded', () => {
            updateRangeValue('priceRange', 'priceValue', '$');
            updateRangeValue('sugarRatio', 'sugarValue', '%');
            updateRangeValue('weatherTemp', 'tempValue', '¬∞F');
        });
    </script>
</body>
</html>